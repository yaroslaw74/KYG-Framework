{##################################################################################
 #  @Project    KYG Framework for business
 #  @Version    1.0.0
 #
 #  @Copyright  (C) 2027 Kataev Yaroslav Georgievich
 #  @E-mail     yaroslaw74@gmail.com
 #  @License    GNU General Public License version 3 or later, see LICENSE.md
 ##################################################################################}
{% extends '@Users/base.html.twig' %}
{% trans_default_domain 'users' %}

{% block title %}
    {{ parent() }}
    Log in!
{% endblock %}

{% block content %}
    <div class="card-body">
        <div class="pt-4 pb-2">
            <h5 class="card-title text-center pb-0 fs-4">{% trans %}Login to Your Account{% endtrans %}</h5>
            <p class="text-center small">{% trans %}Enter your username and password to login{% endtrans %}</p>
        </div>
        <form action="{{ path('app_login') }}" method="post" class="row g-3 needs-validation" novalidate>
            {% if error %}
                <div class="alert alert-danger col-12">
                    {{ error.messageKey|trans(error.messageData, 'security') }}
                </div>
            {% endif %}
            {% if app.user %}
                <div class="mb-3 col-12">
                    {% trans %}You are logged in as{% endtrans %} {{ app.user.userIdentifier }}, <a href="{{ path('app_logout') }}">{% trans %}Logout{% endtrans %}</a>
                </div>
            {% endif %}
            <div class="col-12">
                <label for="username" class="form-label">{% trans %}Username{% endtrans %}</label>
                <input type="text" value="{{ last_username }}" name="_username" id="username" class="form-control" autocomplete="username" required autofocus>
                <div class="invalid-feedback">{% trans %}Please enter your username!{% endtrans %}</div>
            </div>
            <div class="col-12">
                <label for="password" class="form-label">{% trans %}Password{% endtrans %}</label>
                <div class="toggle-password-container">
                    <input type="password" name="_password" id="password" class="form-control" autocomplete="current-password" required {{ stimulus_controller('symfony/ux-toggle-password/toggle-password', {visibleLabel: 'Show password'|trans, hiddenLabel: 'Hide password'|trans, buttonClasses: ['toggle-password-button']}) }}>
                </div>
                    <div class="invalid-feedback">{% trans %}Please enter your password!{% endtrans %}</div>
            </div>
            <div class="col-12">
                <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
            </div>
            <div class="col-12 d-flex flex-row justify-content-between">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="_remember_me" id="_remember_me" value="true">
                    <label class="form-check-label" for="_remember_me">{% trans %}Remember me{% endtrans %}</label>
                </div>
                <p class="mb-0"><a href="{{ path('app_forgot_password_request') }}">{% trans %}Forgot password?{% endtrans %}</a></p>
            </div>
            <div class="col-12">
                <button class="btn btn-primary w-100" type="submit">{% trans %}Login{% endtrans %}</button>
            </div>
        </form>
    </div>
{% endblock %}
